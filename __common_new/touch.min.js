function drag(e){e.preventDefault();var t=e.gesture.deltaX,n=e.gesture.deltaY;-JOYPAD_MOVE>t?(_left=!0,_right=!1):t>JOYPAD_MOVE?(_right=!0,_left=!1):t>-JOYPAD_MOVE&&JOYPAD_MOVE>t&&(_left=!1,_right=!1),-JOYPAD_MOVE>n?(_up=!0,_down=!1):n>JOYPAD_MOVE?(_down=!0,_up=!1):n>-JOYPAD_MOVE&&JOYPAD_MOVE>n&&(_up=!1,_down=!1)}function drag2(e){e.preventDefault();var t=e.gesture.deltaX,n=e.gesture.deltaY;-JOYPAD_MOVE>t?(_left2=!0,_right2=!1):t>JOYPAD_MOVE?(_right2=!0,_left2=!1):t>-JOYPAD_MOVE&&JOYPAD_MOVE>t&&(_left2=!1,_right2=!1),-JOYPAD_MOVE>n?(_up2=!0,_down2=!1):n>JOYPAD_MOVE?(_down2=!0,_up2=!1):n>-JOYPAD_MOVE&&JOYPAD_MOVE>n&&(_up2=!1,_down2=!1)}function release(){_left=!1,_right=!1,_up=!1,_down=!1}function release2(){_left2=!1,_right2=!1,_up2=!1,_down2=!1}var JOYPAD_MOVE=30;!function(e,t){"use strict";function n(){r.READY||(m.determineEventTypes(),v.each(r.gestures,function(e){y.register(e)}),m.onTouch(r.DOCUMENT,h,y.detect),m.onTouch(r.DOCUMENT,d,y.detect),r.READY=!0)}var r=function T(e,t){return new T.Instance(e,t||{})};r.VERSION="1.1.3",r.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.DOCUMENT=document,r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in e,r.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&r.IS_MOBILE||r.HAS_POINTEREVENTS,r.CALCULATE_INTERVAL=25;var a={},i=r.DIRECTION_DOWN="down",o=r.DIRECTION_LEFT="left",s=r.DIRECTION_UP="up",c=r.DIRECTION_RIGHT="right",l=r.POINTER_MOUSE="mouse",u=r.POINTER_TOUCH="touch",g=r.POINTER_PEN="pen",p=r.EVENT_START="start",h=r.EVENT_MOVE="move",d=r.EVENT_END="end",f=r.EVENT_RELEASE="release",_=r.EVENT_TOUCH="touch";r.READY=!1,r.plugins=r.plugins||{},r.gestures=r.gestures||{};var v=r.utils={extend:function(e,n,r){for(var a in n)!n.hasOwnProperty(a)||e[a]!==t&&r||(e[a]=n[a]);return e},on:function(e,t,n){e.addEventListener(t,n,!1)},off:function(e,t,n){e.removeEventListener(t,n,!1)},each:function(e,n,r){var a,i;if("forEach"in e)e.forEach(n,r);else if(e.length!==t){for(a=0,i=e.length;i>a;a++)if(n.call(r,e[a],a,e)===!1)return}else for(a in e)if(e.hasOwnProperty(a)&&n.call(r,e[a],a,e)===!1)return},inStr:function(e,t){return e.indexOf(t)>-1},inArray:function(e,t){if(e.indexOf){var n=e.indexOf(t);return-1===n?!1:n}for(var r=0,a=e.length;a>r;r++)if(e[r]===t)return r;return!1},toArray:function(e){return Array.prototype.slice.call(e,0)},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],n=[],r=[],a=[],i=Math.min,o=Math.max;return 1===e.length?{pageX:e[0].pageX,pageY:e[0].pageY,clientX:e[0].clientX,clientY:e[0].clientY}:(v.each(e,function(e){t.push(e.pageX),n.push(e.pageY),r.push(e.clientX),a.push(e.clientY)}),{pageX:(i.apply(Math,t)+o.apply(Math,t))/2,pageY:(i.apply(Math,n)+o.apply(Math,n))/2,clientX:(i.apply(Math,r)+o.apply(Math,r))/2,clientY:(i.apply(Math,a)+o.apply(Math,a))/2})},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.clientX-e.clientX,r=t.clientY-e.clientY;return 180*Math.atan2(r,n)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return n>=r?e.clientX-t.clientX>0?o:c:e.clientY-t.clientY>0?s:i},getDistance:function(e,t){var n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==s||e==i},setPrefixedCss:function(e,t,n,r){var a=["","Webkit","Moz","O","ms"];t=v.toCamelCase(t);for(var i=0;i<a.length;i++){var o=t;if(a[i]&&(o=a[i]+o.slice(0,1).toUpperCase()+o.slice(1)),o in e.style){e.style[o]=(null==r||r)&&n||"";break}}},toggleBehavior:function(e,t,n){if(t&&e&&e.style){v.each(t,function(t,r){v.setPrefixedCss(e,r,t,n)});var r=n&&function(){return!1};"none"==t.userSelect&&(e.onselectstart=r),"none"==t.userDrag&&(e.ondragstart=r)}},toCamelCase:function(e){return e.replace(/[_-]([a-z])/g,function(e){return e[1].toUpperCase()})}},m=r.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(e,t,n,r){var a=t.split(" ");v.each(a,function(t){v.on(e,t,n),r&&r(t)})},off:function(e,t,n,r){var a=t.split(" ");v.each(a,function(t){v.off(e,t,n),r&&r(t)})},onTouch:function(e,t,n){var i=this,o=function(a){var o,s=a.type.toLowerCase(),c=r.HAS_POINTEREVENTS,l=v.inStr(s,"mouse");l&&i.preventMouseEvents||(l&&t==p&&0===a.button?(i.preventMouseEvents=!1,i.shouldDetect=!0):c&&t==p?i.shouldDetect=1===a.buttons||E.matchType(u,a):l||t!=p||(i.preventMouseEvents=!0,i.shouldDetect=!0),c&&t!=d&&E.updatePointer(t,a),i.shouldDetect&&(o=i.doDetect.call(i,a,t,e,n)),o==d&&(i.preventMouseEvents=!1,i.shouldDetect=!1,E.reset()),c&&t==d&&E.updatePointer(t,a))};return this.on(e,a[t],o),o},doDetect:function(e,t,n,r){var a=this.getTouchList(e,t),i=a.length,o=t,s=a.trigger,c=i;t==p?s=_:t==d&&(s=f,c=a.length-(e.changedTouches?e.changedTouches.length:1)),c>0&&this.started&&(o=h),this.started=!0;var l=this.collectEventData(n,o,a,e);return t!=d&&r.call(y,l),s&&(l.changedLength=c,l.eventType=s,r.call(y,l),l.eventType=o,delete l.changedLength),o==d&&(r.call(y,l),this.started=!1),o},determineEventTypes:function(){var t;return t=r.HAS_POINTEREVENTS?e.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],a[p]=t[0],a[h]=t[1],a[d]=t[2],a},getTouchList:function(e,t){if(r.HAS_POINTEREVENTS)return E.getTouchList();if(e.touches){if(t==h)return e.touches;var n=[],a=[].concat(v.toArray(e.touches),v.toArray(e.changedTouches)),i=[];return v.each(a,function(e){v.inArray(n,e.identifier)===!1&&i.push(e),n.push(e.identifier)}),i}return e.identifier=1,[e]},collectEventData:function(e,t,n,r){var a=u;return v.inStr(r.type,"mouse")||E.matchType(l,r)?a=l:E.matchType(g,r)&&(a=g),{center:v.getCenter(n),timeStamp:Date.now(),target:r.target,touches:n,eventType:t,pointerType:a,srcEvent:r,preventDefault:function(){var e=this.srcEvent;e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return y.stopDetect()}}}},E=r.PointerEvent={pointers:{},getTouchList:function(){var e=[];return v.each(this.pointers,function(t){e.push(t)}),e},updatePointer:function(e,t){e==d||e!=d&&1!==t.buttons?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,r={};return r[l]=n===(t.MSPOINTER_TYPE_MOUSE||l),r[u]=n===(t.MSPOINTER_TYPE_TOUCH||u),r[g]=n===(t.MSPOINTER_TYPE_PEN||g),r[e]},reset:function(){this.pointers={}}},y=r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:v.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst,n=t.options;return v.each(this.gestures,function(r){!this.stopped&&t.enabled&&n[r.name]&&r.handler.call(r,e,t)},this),this.current&&(this.current.lastEvent=e),e.eventType==d&&this.stopDetect(),e}},stopDetect:function(){this.previous=v.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(e,t,n,a,i){var o=this.current,s=!1,c=o.lastCalcEvent,l=o.lastCalcData;c&&e.timeStamp-c.timeStamp>r.CALCULATE_INTERVAL&&(t=c.center,n=e.timeStamp-c.timeStamp,a=e.center.clientX-c.center.clientX,i=e.center.clientY-c.center.clientY,s=!0),(e.eventType==_||e.eventType==f)&&(o.futureCalcEvent=e),(!o.lastCalcEvent||s)&&(l.velocity=v.getVelocity(n,a,i),l.angle=v.getAngle(t,e.center),l.direction=v.getDirection(t,e.center),o.lastCalcEvent=o.futureCalcEvent||e,o.futureCalcEvent=e),e.velocityX=l.velocity.x,e.velocityY=l.velocity.y,e.interimAngle=l.angle,e.interimDirection=l.direction},extendEventData:function(e){var t=this.current,n=t.startEvent,r=t.lastEvent||n;(e.eventType==_||e.eventType==f)&&(n.touches=[],v.each(e.touches,function(e){n.touches.push({clientX:e.clientX,clientY:e.clientY})}));var a=e.timeStamp-n.timeStamp,i=e.center.clientX-n.center.clientX,o=e.center.clientY-n.center.clientY;return this.getCalculatedData(e,r.center,a,i,o),v.extend(e,{startEvent:n,deltaTime:a,deltaX:i,deltaY:o,distance:v.getDistance(n.center,e.center),angle:v.getAngle(n.center,e.center),direction:v.getDirection(n.center,e.center),scale:v.getScale(n.touches,e.touches),rotation:v.getRotation(n.touches,e.touches)}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),v.extend(r.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}};r.Instance=function(e,t){var a=this;n(),this.element=e,this.enabled=!0,v.each(t,function(e,n){delete t[n],t[v.toCamelCase(n)]=e}),this.options=v.extend(v.extend({},r.defaults),t||{}),this.options.behavior&&v.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=m.onTouch(e,p,function(e){a.enabled&&e.eventType==p?y.startDetect(a,e):e.eventType==_&&y.detect(e)}),this.eventHandlers=[]},r.Instance.prototype={on:function(e,t){var n=this;return m.on(n.element,e,t,function(e){n.eventHandlers.push({gesture:e,handler:t})}),n},off:function(e,t){var n=this;return m.off(n.element,e,t,function(e){var r=v.inArray({gesture:e,handler:t});r!==!1&&n.eventHandlers.splice(r,1)}),n},trigger:function(e,t){t||(t={});var n=r.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var a=this.element;return v.hasParent(t.target,a)&&(a=t.target),a.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(v.toggleBehavior(this.element,this.options.behavior,!1),e=-1;t=this.eventHandlers[++e];)v.off(this.element,t.gesture,t.handler);return this.eventHandlers=[],m.off(this.element,a[p],this.eventStartHandler),null}},function(e){function t(t,r){var a=y.current;if(!(r.options.dragMaxTouches>0&&t.touches.length>r.options.dragMaxTouches))switch(t.eventType){case p:n=!1;break;case h:if(t.distance<r.options.dragMinDistance&&a.name!=e)return;var l=a.startEvent.center;if(a.name!=e&&(a.name=e,r.options.dragDistanceCorrection&&t.distance>0)){var u=Math.abs(r.options.dragMinDistance/t.distance);l.pageX+=t.deltaX*u,l.pageY+=t.deltaY*u,l.clientX+=t.deltaX*u,l.clientY+=t.deltaY*u,t=y.extendEventData(t)}(a.lastEvent.dragLockToAxis||r.options.dragLockToAxis&&r.options.dragLockMinDistance<=t.distance)&&(t.dragLockToAxis=!0);var g=a.lastEvent.direction;t.dragLockToAxis&&g!==t.direction&&(t.direction=v.isVertical(g)?t.deltaY<0?s:i:t.deltaX<0?o:c),n||(r.trigger(e+"start",t),n=!0),r.trigger(e,t),r.trigger(e+t.direction,t);var _=v.isVertical(t.direction);(r.options.dragBlockVertical&&_||r.options.dragBlockHorizontal&&!_)&&t.preventDefault();break;case f:n&&t.changedLength<=r.options.dragMaxTouches&&(r.trigger(e+"end",t),n=!1);break;case d:n=!1}}var n=!1;r.gestures.Drag={name:e,index:50,handler:t,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),r.gestures.Gesture={name:"gesture",index:1337,handler:function(e,t){t.trigger(this.name,e)}},function(e){function t(t,r){var a=r.options,i=y.current;switch(t.eventType){case p:clearTimeout(n),i.name=e,n=setTimeout(function(){i&&i.name==e&&r.trigger(e,t)},a.holdTimeout);break;case h:t.distance>a.holdThreshold&&clearTimeout(n);break;case f:clearTimeout(n)}}var n;r.gestures.Hold={name:e,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:t}}("hold"),r.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==f&&t.trigger(this.name,e)}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(e,t){if(e.eventType==f){var n=e.touches.length,r=t.options;if(n<r.swipeMinTouches||n>r.swipeMaxTouches)return;(e.velocityX>r.swipeVelocityX||e.velocityY>r.swipeVelocityY)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},function(e){function t(t,r){var a,i,o=r.options,s=y.current,c=y.previous;switch(t.eventType){case p:n=!1;break;case h:n=n||t.distance>o.tapMaxDistance;break;case d:!v.inStr(t.srcEvent.type,"cancel")&&t.deltaTime<o.tapMaxTime&&!n&&(a=c&&c.lastEvent&&t.timeStamp-c.lastEvent.timeStamp,i=!1,c&&c.name==e&&a&&a<o.doubleTapInterval&&t.distance<o.doubleTapDistance&&(r.trigger("doubletap",t),i=!0),(!i||o.tapAlways)&&(s.name=e,r.trigger(s.name,t)))}}var n=!1;r.gestures.Tap={name:e,index:100,handler:t,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),r.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(e,t){return t.options.preventMouse&&e.pointerType==l?void e.stopDetect():(t.options.preventDefault&&e.preventDefault(),void(e.eventType==_&&t.trigger("touch",e)))}},function(e){function t(t,r){switch(t.eventType){case p:n=!1;break;case h:if(t.touches.length<2)return;var a=Math.abs(1-t.scale),i=Math.abs(t.rotation);if(a<r.options.transformMinScale&&i<r.options.transformMinRotation)return;y.current.name=e,n||(r.trigger(e+"start",t),n=!0),r.trigger(e,t),i>r.options.transformMinRotation&&r.trigger("rotate",t),a>r.options.transformMinScale&&(r.trigger("pinch",t),r.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case f:n&&t.changedLength<2&&(r.trigger(e+"end",t),n=!1)}}var n=!1;r.gestures.Transform={name:e,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:t}}("transform"),"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:e.Hammer=r}(window),window.scrollTo(0,1),document.body.addEventListener("touchmove",function(e){e.preventDefault()},!1),["joypad-left-up.png","joypad-left-center.png","joypad-left-down.png","joypad-left-up_left.png","joypad-left-up_right.png","joypad-left-down_left.png","joypad-left-down_right.png","joypad-left-left.png","joypad-left-right.png","joypad-right-up.png","joypad-right-up_left.png","joypad-right-up_right.png","joypad-right-down.png","joypad-right-down_left.png","joypad-right-down_right.png","joypad-right-left.png","joypad-right-right.png"].forEach(function(e){(new Image).src="images/"+e});var touch_controls=document.getElementById("touch-controls"),joypad_left=document.getElementById("joypad-left"),joypad_right=document.getElementById("joypad-right"),touch=!0,_up=!1,_down=!1,_left=!1,_right=!1,_space=!1,_up2=!1,_down2=!1,_left2=!1,_right2=!1,touchX,touchY,touchX2,touchY2,button=document.getElementsByClassName("button")[0],cross=document.getElementsByClassName("cross")[0],cross2=document.getElementsByClassName("cross2")[0],horizontal=document.getElementsByClassName("horizontal")[0],vertical=document.getElementsByClassName("vertical")[0],hammertime=new Hammer(touch_controls,{drag_max_touches:0,prevent_default:!0,scale_treshold:0});hammertime.on("touch drag dragstart dragend release",function(e){var t=e.gesture.touches;e.gesture.preventDefault();for(var n=0,r=t.length;r>n;n++)switch(target=t[n].target,e.type){case"touch":"button"==target.className&&(document.getElementsByClassName("button")[0].src="images/joypad-left-pressed.png",_space=!0);break;case"dragstart":"cross"==target.className||"horizontal"==target.className?(touchX=t[n].screenX,touchY=t[n].screenY):("cross2"==target.className||"vertical"==target.className)&&(touchX2=t[n].screenX,touchY2=t[n].screenY);break;case"drag":if("horizontal"==target.className){var a=t[n].screenX-touchX,i=t[n].screenY-touchY;-JOYPAD_MOVE>a?(_left=!0,_right=!1):a>JOYPAD_MOVE?(_right=!0,_left=!1):(_left=!1,_right=!1),target.src=_left?"images/joypad-right-left.png":_right?"images/joypad-right-right.png":"images/joypad-right-center.png"}else if("vertical"==target.className){var a=t[n].screenX-touchX2,i=t[n].screenY-touchY2;-JOYPAD_MOVE>i?(_up2=!0,_down2=!1):i>JOYPAD_MOVE?(_down2=!0,_up2=!1):(_up2=!1,_down2=!1),target.src=_up2?"images/joypad-left-up.png":_down2?"images/joypad-left-down.png":"images/joypad-left-center.png"}else if("cross"==target.className){var a=t[n].screenX-touchX,i=t[n].screenY-touchY;-JOYPAD_MOVE>a?(_left=!0,_right=!1):a>JOYPAD_MOVE?(_right=!0,_left=!1):a>-JOYPAD_MOVE&&JOYPAD_MOVE>a&&(_left=!1,_right=!1),-JOYPAD_MOVE>i?(_up=!0,_down=!1):i>JOYPAD_MOVE?(_down=!0,_up=!1):i>-JOYPAD_MOVE&&JOYPAD_MOVE>i?(_up=!1,_down=!1):(_up=!1,_down=!1,_left=!1,_right=!1),target.src=_up?_left?"images/joypad-right-up_left.png":_right?"images/joypad-right-up_right.png":"images/joypad-right-up.png":_down?_left?"images/joypad-right-down_left.png":_right?"images/joypad-right-down_right.png":"images/joypad-right-down.png":_left?"images/joypad-right-left.png":_right?"images/joypad-right-right.png":"images/joypad-right-center.png"}else if("cross2"==target.className){var a=t[n].screenX-touchX2,i=t[n].screenY-touchY2;-JOYPAD_MOVE>a?(_left2=!0,_right2=!1):a>JOYPAD_MOVE?(_right2=!0,_left2=!1):a>-JOYPAD_MOVE&&JOYPAD_MOVE>a&&(_left2=!1,_right2=!1),-JOYPAD_MOVE>i?(_up2=!0,_down2=!1):i>JOYPAD_MOVE?(_down2=!0,_up2=!1):i>-JOYPAD_MOVE&&JOYPAD_MOVE>i?(_up2=!1,_down2=!1):(_up2=!1,_down2=!1,_left2=!1,_right2=!1),target.src=_up2?_left2?"images/joypad-left-up_left.png":_right2?"images/joypad-left-up_right.png":"images/joypad-left-up.png":_down2?_left2?"images/joypad-left-down_left.png":_right2?"images/joypad-left-down_right.png":"images/joypad-left-down.png":_left2?"images/joypad-left-left.png":_right2?"images/joypad-left-right.png":"images/joypad-left-center.png"}break;case"dragend":case"release":release(),button&&(button.src="images/joypad-left.png"),cross&&(cross.src="images/joypad-right-center.png"),cross2&&(cross2.src="images/joypad-left-center.png"),horizontal&&(horizontal.src="images/joypad-right-center.png"),vertical&&(vertical.src="images/joypad-left-center.png")}});